#!/usr/bin/env bash

# Symlink most config directories normally
for item in "$HOME"/dotfiles/config/*; do
    name=$(basename "$item")

    # Skip directories that need special handling
    if [[ "$name" == "claude" || "$name" == "Cursor" ]]; then
        continue
    fi

    ln -sfnv "$item" "$HOME/.config/"
done

# Special handling for claude: symlink to ~/.claude/
mkdir -p "$HOME/.claude"
ln -sfnv "$HOME/dotfiles/config/claude/settings.json" "$HOME/.claude/settings.json"
ln -sfnv "$HOME/dotfiles/config/claude/skills" "$HOME/.claude/skills"
ln -sfnv "$HOME/dotfiles/config/claude/instructions" "$HOME/.claude/instructions"
ln -sfnv "$HOME/dotfiles/config/claude/statusline-command.sh" "$HOME/.claude/statusline-command.sh"

# Special handling for Cursor: symlink User directory files only
mkdir -p "$HOME/.config/Cursor/User"
ln -sfnv "$HOME/dotfiles/config/Cursor/User/keybindings.json" "$HOME/.config/Cursor/User/keybindings.json"
ln -sfnv "$HOME/dotfiles/config/Cursor/User/settings.json" "$HOME/.config/Cursor/User/settings.json"
