# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# color palette
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
source = ~/.config/hypr/palette.conf

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# global environment variables
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
env = HYPRCURSOR_THEME, catppuccin-macchiato-dark
env = HYPRCURSOR_SIZE, 24
env = XCURSOR_THEME, catppuccin-macchiato-dark
env = XCURSOR_SIZE, 24

env = XDG_CURRENT_DESKTOP, Hyprland
env = XDG_SESSION_TYPE, wayland
env = XDG_SESSION_DESKTOP, Hyprland

env = QT_QPA_PLATFORM, wayland;xcb
env = QT_QPA_PLATFORMTHEME, hyprqt6engine
env = QT_WAYLAND_DISABLE_WINDOWDECORATION, 1
env = QT_AUTO_SCREEN_SCALE_FACTOR, 1
env = QT_STYLE_OVERRIDE, kvantum

env = GDK_BACKEND, wayland,x11
env = SDL_VIDEODRIVER, wayland

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# exec-once: run commands once at startup
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
exec-once = dunst            # notification daemon
exec-once = hyprpolkitagent  # polkit agent
exec-once = hypridle         # idle detection
exec-once = newtab           # local file server (new tab)

# eww widgets initialization
$eww_dir = ~/dotfiles/config/eww/bin
exec-once = $eww_dir/create_temp_files
exec-once = $eww_dir/music_info get_json
exec-once = $eww_dir/workspaces

# luanch startup script
exec-once = hyprstart

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# window rules: set window properties based on title or class
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
monitor = HDMI-A-1, 3840x2160@100, 0x0, 1

# Discord
windowrule = match:class discord, workspace 1 silent

# Spotify
windowrule = match:title ^(Spotify), workspace 5 silent
windowrule = match:title ^(Spotify), float on

# Zathura
windowrule = match:title zathura, float on
windowrule = match:title zathura, size 1000 1475
windowrule = match:title zathura, center on

# Float by default
windowrule = match:title imv, float on
windowrule = match:title mpv, float on
windowrule = match:title zoom, float on

# Firefox
windowrule = match:title ^(firefox-developer-edition)$, opacity 1.0 override 1.0 override

# GLava
windowrule = match:title ^(GLava)$, border_size 0
windowrule = match:title ^(GLava)$, no_focus on
windowrule = match:title ^(GLava)$, no_shadow on
windowrule = match:title ^(GLava)$, float on
windowrule = match:title ^(GLava)$, pin on
windowrule = match:title ^(GLava)$, no_blur on

# GUI modals
windowrule = match:title ^(File|Settings|Authentication|Save As|terminalfloat), float on
windowrule = match:title ^(File|Settings|Authentication|Save As|terminalfloat), dim_around on
windowrule = match:title ^(File|Settings|Authentication|Save As|terminalfloat), size 2900 1606
windowrule = match:title ^(File|Settings|Authentication|Save As|terminalfloat), move 17% 10%

# Webcam
windowrule = match:title guvcview, float on
windowrule = match:title guvcview, rounding 69
windowrule = match:title guvcview, opacity 0.8
windowrule = match:title guvcview, no_focus on

# Special workspace for stash (hidden slaves)
workspace = special:stash, gapsout:20

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# settings
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# keybinds
source = ~/.config/hypr/binds.conf

general {
    border_size = 2
    gaps_in = 6
    gaps_out = 84, 85, 22, 125
    col.active_border = $peach
    col.inactive_border = $blue
    layout = master
    resize_on_border = false
}

decoration {
    rounding = 4
    active_opacity = 1
    inactive_opacity = 0.98
    fullscreen_opacity = 1

    shadow {
        enabled = true
        range = 24
        render_power = 4
        ignore_window = true
        color = $shadow_active
        color_inactive = $shadow_inactive
        offset = 0 0
    }
}

animations {
    enabled = true
    animation = windows, 1, 1, default, popin
    animation = windowsOut, 1, 1.5, default
    animation = windowsMove, 1, 1.5, default, slidefade
    animation = workspaces, 1, 0.5, default, slide
    animation = fade, 1, 0.5, default
}

input {
    repeat_rate = 69
    repeat_delay = 324
    follow_mouse = 1
    sensitivity = 1
    float_switch_override_focus = 0
}

master {
    allow_small_split = true
    special_scale_factor = 1
    mfact = 0.4942
    new_status = slave
    new_on_top = false
    new_on_active = none
    orientation = left
    smart_resizing = false
    drop_at_cursor = true
    always_keep_position = false
}

dwindle {
    pseudotile = false
    force_split = 0
    preserve_split = false
    smart_split = false
    smart_resizing = true
    permanent_direction_override = false
    special_scale_factor = 1
    split_width_multiplier = 1.0
    use_active_for_splits = true
    default_split_ratio = 1.0
    split_bias = 0
    precise_mouse_move = false
    single_window_aspect_ratio = 0 0
    single_window_aspect_ratio_tolerance = 0.1
}
