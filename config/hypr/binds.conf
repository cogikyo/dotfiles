# ╭───────────────────────────────────────────────────────────────────────────────╮
# │                                    modkeys                                    │
# ╰───────────────────────────────────────────────────────────────────────────────╯

$M   = SUPER
$MS  = SUPER SHIFT
$MSC = SUPER SHIFT CTRL

$S    = SHIFT
$ctrl = CTRL
$CS   = CTRL SHIFT

$A   = ALT # common window control
$AM  = ALT SUPER  # window modification control
$AMS = ALT SUPER SHIFT

$browser = firefox-developer-edition
$termfloat = kitty --title="terminalfloat"
$player = playerctl --player=spotify

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# window Management
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $M,   X,      Close active window, killactive
bindd = $MS,  X,      Force kill window,   exec, hyprctl kill
bindd = $M,   A,      Set pseudo-master,   exec, pseudo-master
bindd = $M,   Z,      Swap with master,    exec, swap-master
bindd = $CS,  Escape, Toggle monocle,      exec, monocle
bindd = $MSC, T,      Toggle floating,     exec, hyprctl dispatch togglefloating

bindm = $MSC, mouse:272, movewindow
bindm = $MSC, mouse:273, resizewindow

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# focus navigation (custom layout: s=left, t=right, r=up, e=down)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
bindd = $A, Backspace, Cycle master split,    exec,      split
bindd = $A, Z,         Toggle alt master,     exec,      split -d

bindd = $A, s, Focus left,            movefocus, l
bindd = $A, t, Focus right,           movefocus, r
bindd = $A, r, Focus up,              movefocus, u
bindd = $A, e, Focus down,            movefocus, d
bindd = $A, g, Cycle previous window, cyclenext, prev

bindd = $AM,  Left,  Move window left,  movewindow, l
bindd = $AM,  Right, Move window right, movewindow, r
bindd = $AM,  Up,    Move window up,    movewindow, u
bindd = $AM,  Down,  Move window down,  movewindow, d

bindd = $AMS, S,     Spotify position,  exec,       hyprctl dispatch setfloating; hyprctl dispatch moveactive exact 2018 88; hyprctl dispatch resizeactive exact 1710 2053

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# workspaces (1: chat, 2: misc, 3: primary, 4: settings, 5: music)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $M, s, Workspace 1,         exec, ws 1
bindd = $M, e, Workspace 2,         exec, ws 2
bindd = $M, t, Workspace 3,         exec, ws 3
bindd = $M, d, Workspace 4,         exec, ws 4
bindd = $M, g, Workspace 5 (music), exec, ws-music

bindd = $AM, s, Open layout 1, exec, layout -n 1
bindd = $AM, e, Open layout 2, exec, layout -n 2
bindd = $AM, t, Open layout 3, exec, layout -n 3 -a "h"
bindd = $AM, d, Open layout 4, exec, layout -n 4

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# applications
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $M,  Return, Terminal,     exec, focus-active kitty --title "terminal" "kitty --session ~/.config/kitty/sessions/term.conf"
bindd = $M,  F,      Browser,      exec, focus-active firefox-developer-edition $browser
bindd = $M,  C,      Claude,       exec, focus-active kitty --title "claude" "kitty --title=claude --session ~/.config/kitty/sessions/term.conf"
bindd = $M,  P,      App launcher, exec, hyprlauncher

bindd = $MS, Return, Float terminal,           exec, $termfloat --session "~/.config/kitty/sessions/term.conf"
bindd = $MS, G,      Lazygit dotfiles (float), exec, $termfloat --working-directory="dotfiles" -e "lazygit"
bindd = $MS, Y,      Lazygit acr (float),      exec, $termfloat --session "~/.config/kitty/sessions/term.conf"

bindd = $MS, C, Color picker, exec, hyprpicker | wl-copy

bindd = $MS, Z, Zathura,     exec, zathura

bindd = $M, Y, Toggle webcam, exec, pkill guvcview; guvcview & disown
bindd = $MSC, Y, Kill webcam,   exec, pkill guvcview


# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# media
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $MS, H,     Play/pause,     exec, $player play-pause
bindd = $MS, Comma, Next track,     exec, $player next
bindd = $MS, D,     Previous track, exec, $player previous

bindl = , XF86AudioPlay, exec, $player play-pause
bindl = , XF86AudioNext, exec, $player next
bindl = , XF86AudioPrev, exec, $player previous

# bindd = $MSC, M, Start GLava visualizer, exec, glava -e "radial_rc.glsl" & glava -e "bars_rc.glsl" & glava -e "bars_r_rc.glsl"
# bindd = $MSC, K, Kill GLava, exec, pkill glava

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# screenshots & recording
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $MS, S, Screenshot region to clipboard, exec, grim -g "$(slurp)" - | wl-copy && dunstify "screenshot" "saved to clipboard" -u low -a "grim"
bindd = $MS, B, Screenshot for Claude, exec, FILE=/tmp/screenshot_$(date +%s).png && grim -g "$(slurp)" "$FILE" && echo -n "$FILE" | wl-copy && dunstify "screenshot" "$FILE" -u low -a "grim"
# bindd = $MS, B, Screenshot window to clipboard, exec, grim -g "$(hyprctl activewindow -j | jq -r '.at as $at | .size as $size | "\($at[0]),\($at[1]) \($size[0])x\($size[1])"')" - | wl-copy && dunstify "screenshot" "current window saved to clipboard" -u low -a "grim"
bindd = $MSC,  C, Screenshot region to file,      exec, grim -g "$(slurp)" ~/media/screenshots/$(date +%F__%T__slurp).png && dunstify "screenshot" "saved to folder" -a "grim"

bindd = $MSC, V, Record screen,           exec, record & disown
bindd = $MSC, U, Record region (no audio), exec, record -s slurp -a none & disown
bindd = $MSC, O, Stop recording,          exec, pkill -SIGINT record

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# pseudo-lock
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = SUPER SHIFT, L, Lock screen, exec, lock
bindd = SUPER SHIFT, Q, pseudo-lock, exec, pseudo-lock

submap = pseudolock
bindd  = SUPER SHIFT, Q, Unlock pseudo-lock, exec, pseudo-lock -u
bind = , catchall, exec,
submap = reset
