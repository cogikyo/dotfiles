$mod = SUPER
$alt = ALT
$shift = SHIFT
$ctrl = CTRL

$browser = firefox-developer-edition
$termfloat = kitty --title="terminalfloat"
$player = playerctl --player=spotify

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Window Management
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mod, X, Close active window, killactive
bindd = $mod $shift, X, Force kill window, exec, hyprctl kill
bindd = $mod, A, Toggle fullscreen, fullscreen, 1
bindd = $mod $shift $ctrl, T, Toggle floating, togglefloating

bindm = $mod $shift $ctrl, mouse:272, movewindow
bindm = $mod $shift $ctrl, mouse:273, resizewindow

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Focus Navigation (custom layout: s=left, t=right, r=up, e=down)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $alt, s, Focus left, movefocus, l
bindd = $alt, t, Focus right, movefocus, r
bindd = $alt, r, Focus up, movefocus, u
bindd = $alt, e, Focus down, movefocus, d
bindd = $alt, g, Cycle previous window, cyclenext, prev

bindd = $alt $mod, Left, Move window left, movewindow, l
bindd = $alt $mod, Right, Move window right, movewindow, r
bindd = $alt $mod, Up, Move window up, movewindow, u
bindd = $alt $mod, Down, Move window down, movewindow, d

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Workspaces
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

$move_workspace = hyprctl dispatch workspace

bindd = $mod, s, Workspace 1, exec, $move_workspace 1 && change-bg "kill"
bindd = $mod, e, Workspace 2, exec, $move_workspace 2 && change-bg "kill"
bindd = $mod, t, Workspace 3, exec, $move_workspace 3 && change-bg "kill"
bindd = $mod, d, Workspace 4, exec, $move_workspace 4 && change-bg "kill"
bindd = $mod, g, Workspace 5 (music), exec, $move_workspace 5 && change-bg "music"

bindd = $alt $mod, s, Open layout 1, exec, layout -n 1
bindd = $alt $mod, e, Open layout 2, exec, layout -n 2
bindd = $alt $mod, t, Open layout 3, exec, layout -n 3 -a "h"
bindd = $alt $mod, d, Open layout 4, exec, layout -n 4

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Applications
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mod, Return, Terminal, exec, kitty --session ~/.config/kitty/sessions/term.conf
bindd = $mod, F, Browser, exec, $browser
bindd = $mod, P, App launcher, exec, hyprlauncher
bindd = $mod, Period, Emoji picker, exec, hyprlauncher -p emoji

bindd = $mod $shift, Return, Float terminal, exec, $termfloat --session "~/.config/kitty/sessions/term.conf"
bindd = $mod $shift, R, Btop (float), exec, $termfloat -e "btop"
bindd = $mod $shift, G, Lazygit dotfiles (float), exec, $termfloat --working-directory="dotfiles" -e "lazygit"
bindd = $mod $shift, Y, Lazygit acr (float), exec, $termfloat --working-directory="acr" -e "lazygit"

bindd = $mod $shift, Z, Zathura, exec, zathura
bindd = $mod $shift, L, Lock screen, exec, lock
bindd = $alt $mod $shift, T, TablePlus, exec, GDK_DPI_SCALE=1.25 tableplus
bindd = $alt $mod $shift, F, Browser float, exec, $browser; sleep 0.4; hyprctl dispatch togglefloating

bindd = $mod, Y, Toggle webcam, exec, pkill guvcview; guvcview & disown
bindd = $mod $shift $ctrl, Y, Kill webcam, exec, pkill guvcview

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Media
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mod $shift, H, Play/pause, exec, $player play-pause
bindd = $mod $shift, Comma, Next track, exec, $player next
bindd = $mod $shift, D, Previous track, exec, $player previous

bindl = , XF86AudioPlay, exec, $player play-pause
bindl = , XF86AudioNext, exec, $player next
bindl = , XF86AudioPrev, exec, $player previous

bindd = $mod $shift $ctrl, M, Start GLava visualizer, exec, glava -e "radial_rc.glsl" & glava -e "bars_rc.glsl" & glava -e "bars_r_rc.glsl"
bindd = $mod $shift $ctrl, K, Kill GLava, exec, pkill glava

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Screenshots & Recording
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mod $shift, S, Screenshot region to clipboard, exec, grim -g "$(slurp)" - | wl-copy && dunstify "screenshot saved to clipboard" -u low -a "grim"
bindd = $mod $shift, B, Screenshot window to clipboard, exec, grim -g "$(hyprctl activewindow -j | jq -r '.at as $at | .size as $size | "\($at[0]),\($at[1]) \($size[0])x\($size[1])"')" - | wl-copy && dunstify "Screenshot of current window saved to clipboard" -u low -a "grim"
bindd = $mod $shift $ctrl, C, Screenshot region to file, exec, grim -g "$(slurp)" ~/media/screenshots/$(date +%F__%T__slurp).png && dunstify "screenshot saved to folder" -a "grim"

bindd = $mod $shift $ctrl, V, Record screen, exec, record & disown
bindd = $mod $shift $ctrl, U, Record region (no audio), exec, record -s slurp -a none & disown
bindd = $mod $shift $ctrl, O, Stop recording, exec, pkill -SIGINT record

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Utilities
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mod $shift, C, Color picker, exec, hyprpicker | wl-copy

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Resize Submap
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $alt $shift, r, Enter resize mode, submap, resize

submap = resize
    binde = , t, resizeactive, 80 0
    binde = , s, resizeactive, -80 0
    binde = , r, resizeactive, 0 -80
    binde = , e, resizeactive, 0 80

    binde = $shift, t, resizeactive, 200 0
    binde = $shift, s, resizeactive, -200 0
    binde = $shift, r, resizeactive, 0 -200
    binde = $shift, e, resizeactive, 0 200

    bindd = , F, Resize to 1870x1186, resizeactive, exact 1870 1186
    bindd = $shift, S, Spotify position, exec, hyprctl dispatch setfloating; hyprctl dispatch moveactive exact 2018 88; hyprctl dispatch resizeactive exact 1710 2053

    bind = , Escape, submap, reset
    bind = , Return, submap, reset
    bind = $alt $shift, R, submap, reset
submap = reset
