$mod = SUPER
$mods = SUPER SHIFT
$msc = SUPER SHIFT CTRL
$alt = ALT
$altm = ALT SUPER
$shift = SHIFT
$ctrl = CTRL
$cs = CTRL SHIFT 

$browser = firefox-developer-edition
$termfloat = kitty --title="terminalfloat"
$player = playerctl --player=spotify

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Window Management
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mod,  X,         Close active window, killactive
bindd = $mods, X,         Force kill window,   exec, hyprctl kill
bindd = $mod,  A,         Cycle master split,  exec, split
bindd = $mod,  Z,         Resize bottom slave, exec, resize-slave
bindd = $cs,   Escape,    Toggle fullscreen,   exec, split -d
bindd = $msc,  T,         Toggle monocle,      exec, toggle-monocle
bindd = $alt,  Backspace, Toggle floating,     exec, pseudo-master
bindd = $alt,  Z,         Swap with master,    exec, swap-master

bindm = $msc, mouse:272, movewindow
bindm = $msc, mouse:273, resizewindow

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Focus Navigation (custom layout: s=left, t=right, r=up, e=down)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $alt,  s, Focus left,            movefocus, l
bindd = $alt,  t, Focus right,           movefocus, r
bindd = $alt,  r, Focus up,              movefocus, u
bindd = $alt,  e, Focus down,            movefocus, d
bindd = $alt,  g, Cycle previous window, cyclenext, prev

bindd = $altm, Left,  Move window left,  movewindow, l
bindd = $altm, Right, Move window right, movewindow, r
bindd = $altm, Up,    Move window up,    movewindow, u
bindd = $altm, Down,  Move window down,  movewindow, d

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Workspaces (1: chat, 2: misc, 3: primary, 4: settings, 5: music)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

$move_workspace = hyprctl dispatch workspace

bindd = $mod, s, Workspace 1,         exec, $move_workspace 1 && change-bg "kill"
bindd = $mod, e, Workspace 2,         exec, $move_workspace 2 && change-bg "kill"
bindd = $mod, t, Workspace 3,         exec, $move_workspace 3 && change-bg "kill"
bindd = $mod, d, Workspace 4,         exec, $move_workspace 4 && change-bg "kill"
bindd = $mod, g, Workspace 5 (music), exec, $move_workspace 5 && change-bg "music"

bindd = $altm, s, Open layout 1, exec, layout -n 1
bindd = $altm, e, Open layout 2, exec, layout -n 2
bindd = $altm, t, Open layout 3, exec, layout -n 3 -a "h"
bindd = $altm, d, Open layout 4, exec, layout -n 4

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Applications
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mod,  Return, Terminal,     exec, kitty --session ~/.config/kitty/sessions/term.conf
bindd = $mod,  F,      Browser,      exec, $browser
bindd = $mod,  P,      App launcher, exec, hyprlauncher
bindd = $mod,  Q,      Cursor,       exec, cursor
bindd = $mod,  Period, Emoji picker, exec, hypremoji

bindd = $mods, Return, Float terminal,           exec, $termfloat --session "~/.config/kitty/sessions/term.conf"
bindd = $mods, G,      Lazygit dotfiles (float), exec, $termfloat --working-directory="dotfiles" -e "lazygit"
bindd = $mods, Y,      Lazygit acr (float),      exec, $termfloat --session "~/.config/kitty/sessions/term.conf" 

bindd = $mods, Z, Zathura,     exec, zathura

bindd = $mod, Y, Toggle webcam, exec, pkill guvcview; guvcview & disown
bindd = $msc, Y, Kill webcam,   exec, pkill guvcview

bindd = $mods $alt, S, Spotify position, exec, hyprctl dispatch setfloating; hyprctl dispatch moveactive exact 2018 88; hyprctl dispatch resizeactive exact 1710 2053

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Media
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mods, H,     Play/pause,     exec, $player play-pause
bindd = $mods, Comma, Next track,     exec, $player next
bindd = $mods, D,     Previous track, exec, $player previous

bindl = , XF86AudioPlay, exec, $player play-pause
bindl = , XF86AudioNext, exec, $player next
bindl = , XF86AudioPrev, exec, $player previous

# bindd = $msc, M, Start GLava visualizer, exec, glava -e "radial_rc.glsl" & glava -e "bars_rc.glsl" & glava -e "bars_r_rc.glsl"
# bindd = $msc, K, Kill GLava, exec, pkill glava

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Screenshots & Recording
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mods, S, Screenshot region to clipboard, exec, grim -g "$(slurp)" - | wl-copy && dunstify "screenshot" "saved to clipboard" -u low -a "grim"
bindd = $mods, B, Screenshot window to clipboard, exec, grim -g "$(hyprctl activewindow -j | jq -r '.at as $at | .size as $size | "\($at[0]),\($at[1]) \($size[0])x\($size[1])"')" - | wl-copy && dunstify "screenshot" "current window saved to clipboard" -u low -a "grim"
bindd = $msc,  C, Screenshot region to file,      exec, grim -g "$(slurp)" ~/media/screenshots/$(date +%F__%T__slurp).png && dunstify "screenshot" "saved to folder" -a "grim"

bindd = $msc, V, Record screen,           exec, record & disown
bindd = $msc, U, Record region (no audio), exec, record -s slurp -a none & disown
bindd = $msc, O, Stop recording,          exec, pkill -SIGINT record

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Utilities
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = $mods, C, Color picker, exec, hyprpicker | wl-copy

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Pseudo-lock Submap (swallows all keys except unlock combo)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

bindd = SUPER SHIFT, L, Lock screen, exec, lock
bindd = SUPER SHIFT, Q, pseudo-lock, exec, pseudo-lock

submap = pseudolock
bindd  = SUPER SHIFT, Q, Unlock pseudo-lock, exec, pseudo-lock -u
bind = , catchall, exec,
submap = reset
